FROM rust:1.53

ENV PATH=$PATH:/usr/local/go/bin

WORKDIR /app

RUN apt-get update &&\
    wget https://dl.google.com/go/go1.16.linux-amd64.tar.gz &&\
    tar -C /usr/local -xzf go1.16.linux-amd64.tar.gz &&\
    rm go1.16.linux-amd64.tar.gz

COPY . .

WORKDIR zkevm-circuits

RUN cargo bench --no-run

CMD cargo bench --bench evm_prover
